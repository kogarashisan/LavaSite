<!DOCTYPE html>
<html lang="en">
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="http://lava-framework.com/lib/lava-master-DEV.js"></script>
	<link rel="stylesheet" href="http://lava-framework.com/www/css/widgets.css" />

	<script>
		Lava.define(
		'Lava.widget.HelloApp',
		{
			Extends: 'Lava.widget.Standard',
			name: "hello_app",

			_properties: {
				selected_person: null,
				people: [
					{title: "Steve Jobs", birth_year: 1955},
					{title: "Bill Gates", birth_year: 1955},
					{title: "Linus Torvalds", birth_year: 1969}
				]
			},

			_event_handlers: {
				item_click: '_onItemClick'
			},

			_onItemClick: function(dom_event_name, event_object, view, template_arguments) {

				// template_arguments[0] is the first argument, which was passed to event
				this.set("selected_person", template_arguments[0]);

			}
		});

        Firestorm.onDocumentReady(function() {
			Lava.bootstrap();
		});
	</script>
</head>

<body lava-app="HelloApp">

	{#foreach($hello_app.people) as=person}
		<div x:type="container"
			 x:style:background="(person == $hello_app.selected_person) ? 'yellow' : null"
			 x:event:click="$hello_app.item_click(person)">
			{#> person.title}
		</div>
	{/foreach}

	<div x:type="view">
		Selected person: {#> $hello_app.selected_person.title}<br/>
		Birth year: {#> $hello_app.selected_person.birth_year}
	</div>

</body>

</html>
